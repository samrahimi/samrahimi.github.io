import{B as t,A as e}from"./p-4704e7c5.js";const i=new class{constructor(){this._timeseriesByDay=[],this.timeseriesByDay$=new t([]),this._timeseriesByRegion={},this.timeseriesByRegion$=new t({}),this.regions=[],this.arweaveService=e.defaultInstance}getRegions(){return this.regions}getValidDays(){var t=[];return this._timeseriesByDay.forEach(e=>{t.push(e.tags.DATE)}),t.sort((t,e)=>Date.parse(t)-Date.parse(e.DATE)),t}getRegionalTimeSeries(t){return this._timeseriesByRegion[t]}getRegionByDate(t,e){return this._timeseriesByRegion[t].filter(t=>t.date==e)[0]}getSnapshotByDate(t){return this.regions.map(e=>this._timeseriesByRegion[e].filter(e=>e.date==t)[0])}generateRegionalTimeseries(){var t={};this._timeseriesByDay.forEach(e=>{var i=e.tags.DATE;if(t[i])return!1;t[i]=!0,e.data.forEach(t=>{var s=t.provincestate||t.countryregion;t.date=i,t.region=s,t.blockchainTxid=e.tags.txid,t.verifyUrl="https://viewblock.io/arweave/tx/"+e.tags.txid,this._timeseriesByRegion[s]||(this._timeseriesByRegion[s]=[],this.regions.push(s)),this._timeseriesByRegion[s].push(t)})}),this.timeseriesByRegion$.next(this._timeseriesByRegion)}async getRegionalTimeseriesDataset(t=!1){(0==this._timeseriesByDay.length||t)&&(this._timeseriesByDay=await this.arweaveService.getCollection("regional.daily"),this._timeseriesByDay.sort((t,e)=>Date.parse(t.tags.DATE)-Date.parse(e.tags.DATE)),this.timeseriesByDay$.next(this._timeseriesByDay),this.generateRegionalTimeseries())}};export{i as O};