import{B as t,A as s}from"./p-601c53d5.js";const i=new class{constructor(){this._timeseriesByDay=[],this.timeseriesByDay$=new t([]),this._timeseriesByRegion={},this.timeseriesByRegion$=new t({}),this.regions=[],this.arweaveService=s.defaultInstance}getRegions(){return this.regions}getValidDays(){var t=[];return this._timeseriesByDay.forEach(s=>{t.push(s.tags.DATE)}),t.sort((t,s)=>Date.parse(t)-Date.parse(s.DATE)),t}getRegionalTimeSeries(t){return this._timeseriesByRegion[t]}getRegionByDate(t,s){return this._timeseriesByRegion[t].filter(t=>t.date==s)[0]}getSnapshotByDate(t){return this.regions.map(s=>this._timeseriesByRegion[s].filter(s=>s.date==t)[0])}generateRegionalTimeseries(){this._timeseriesByDay.forEach(t=>{var s=t.tags.DATE;t.data.forEach(i=>{var e=i.provincestate||i.countryregion;i.date=s,i.region=e,i.blockchainTxid=t.tags.txid,i.verifyUrl="https://viewblock.io/arweave/tx/"+t.tags.txid,this._timeseriesByRegion[e]||(this._timeseriesByRegion[e]=[],this.regions.push(e)),this._timeseriesByRegion[e].push(i)})}),this.timeseriesByRegion$.next(this._timeseriesByRegion)}async getRegionalTimeseriesDataset(t=!1){(0==this._timeseriesByDay.length||t)&&(this._timeseriesByDay=await this.arweaveService.getCollection("regional.daily"),this._timeseriesByDay.sort((t,s)=>Date.parse(t.tags.DATE)-Date.parse(s.tags.DATE)),this.timeseriesByDay$.next(this._timeseriesByDay),this.generateRegionalTimeseries())}};export{i as O};