import{r as i,h as t}from"./p-b8715656.js";import"./p-601c53d5.js";import{O as s}from"./p-3099ae57.js";const o=class{constructor(t){i(this,t),this.timeseries={},this.snapshot=[],this.rawdata=[],this.regions=[],this.days=[],this.selectedDate="",this.sortBy="cases",this.sortDir="desc"}sortSnapshotData(){switch(this.sortBy){case"cases":this.sortDir="desc",this.snapshot.sort((i,t)=>i.confirmed-t.confirmed);break;case"deaths":this.sortDir="desc",this.snapshot.sort((i,t)=>i.deaths-t.deaths);break;case"recovered":this.sortDir="desc",this.snapshot.sort((i,t)=>i.recovered-t.recovered);break;case"region":this.sortDir="asc",this.snapshot.sort((i,t)=>i.region.localeCompare(t.region));break;case"country":this.sortDir="asc",this.snapshot.sort((i,t)=>i.countryregion.localeCompare(t.countryregion))}"desc"==this.sortDir&&this.snapshot.reverse()}getMostRecent(i){return this.timeseries[i][this.timeseries[i].length-1]}getAllByDate(i){return this.regions.map(t=>(console.log(JSON.stringify(this.timeseries[t],null,2)),this.timeseries[t].filter(t=>t.date==i)[0]))}componentDidLoad(){s.timeseriesByRegion$.subscribe(i=>{console.log(JSON.stringify(s.getRegions())),this.timeseries=Object.assign({},i),this.regions.length=0,this.regions=[...s.getRegions()],this.days.length=0,this.days=[...s.getValidDays()],this.selectedDate=this.days[this.days.length-1],this.snapshot=this.getAllByDate(this.selectedDate),this.sortSnapshotData(),console.log(JSON.stringify(this.snapshot,null,2))}),0==this.regions.length&&this.refreshData()}refreshData(){s.getRegionalTimeseriesDataset(!0)}render(){return[t("ion-header",null,t("ion-toolbar",{color:"primary"},t("ion-buttons",{slot:"start"},t("ion-menu-button",null)),t("ion-title",null,"Coronavirus Global Summary"),t("ion-buttons",{slot:"end"},t("ion-button",{href:"/data/about"},t("ion-icon",{slot:"icon-only",name:"information-circle"})))),t("ion-toolbar",null,t("ion-title",null,"Date ",this.selectedDate))),t("ion-content",{class:"ion-padding"},t("p",null,"This screen displays a snapshot of 2019-nCoV (coronavirus) cases and deaths for a specific day, broken out by region. You can skip to another date by using the dropdown, sort by clicking the column headers, or view the history of the outbreak in any region by clicking on it."),t("p",null,"First time here? ",t("ion-router-link",{href:"/data/about"},"Please read the info!")),t("div",{class:"hscroll"},t("div",{class:"min-500"},t("ion-grid",null,t("ion-row",null,t("ion-col",null,t("b",null,t("a",{href:"#",onClick:()=>{this.sortBy="country",this.sortSnapshotData()}},"Country"))),t("ion-col",null,t("b",null,t("a",{href:"#",onClick:()=>{this.sortBy="region",this.sortSnapshotData()}},"Region"))),t("ion-col",null,t("b",null,t("a",{href:"#",onClick:()=>{this.sortBy="cases",this.sortSnapshotData()}},"Cases"))),t("ion-col",null,t("b",null,t("a",{href:"#",onClick:()=>{this.sortBy="deaths",this.sortSnapshotData()}},"Deaths"))),t("ion-col",null,t("b",null,t("a",{href:"#",onClick:()=>{this.sortBy="recovered",this.sortSnapshotData()}},"Recovered")))),this.snapshot.map(i=>i?t("ion-row",null,t("ion-col",null,i.countryregion),t("ion-col",null,t("ion-router-link",{href:"/time-series/region/"+i.region},i.region)),t("ion-col",null,i.confirmed),t("ion-col",null,i.deaths),t("ion-col",null,i.recovered)):"")))))]}static get style(){return":host{display:block;font-weight:700}ion-col{border:1px solid #eee!important}.hscroll{width:100%;overflow-y:auto}.min-500{min-width:900px!important;width:100%}.darkred{color:#c00!important}"}};export{o as daily_snapshot};